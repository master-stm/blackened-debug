"use strict";(self["webpackChunkblackened"]=self["webpackChunkblackened"]||[]).push([[472],{6472:(e,t,l)=>{l.r(t),l.d(t,{default:()=>j});var a=l(3673);function s(e,t,l,s,o,i){const n=(0,a.up)("Login"),r=(0,a.up)("Register"),u=(0,a.up)("q-page");return(0,a.wg)(),(0,a.j4)(u,{padding:""},{default:(0,a.w5)((()=>["login"===o.currentView?((0,a.wg)(),(0,a.j4)(n,{key:0,onShow:i.switchView},null,8,["onShow"])):(0,a.kq)("",!0),"register"===o.currentView?((0,a.wg)(),(0,a.j4)(r,{key:1,onShow:i.switchView},null,8,["onShow"])):(0,a.kq)("",!0)])),_:1})}const o=e=>((0,a.dD)("data-v-05df2058"),e=e(),(0,a.Cn)(),e),i={class:"absolute-center"},n=o((()=>(0,a._)("legend",null,"Login",-1))),r={class:"register-route row justify-around"},u=o((()=>(0,a._)("p",{class:"col-6"},"New here?",-1)));function d(e,t,l,s,o,d){const m=(0,a.up)("q-input"),c=(0,a.up)("q-btn"),g=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("fieldset",i,[n,(0,a.Wm)(g,{onSubmit:d.onSubmit,onReset:d.onReset,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{modelValue:o.email,"onUpdate:modelValue":t[0]||(t[0]=e=>o.email=e),type:"text",label:"email",rules:[e=>d.isEmailValid(e)||"Please a valid email"],dark:""},null,8,["modelValue","rules"]),(0,a.Wm)(m,{modelValue:o.password,"onUpdate:modelValue":t[1]||(t[1]=e=>o.password=e),type:"password",label:"password",rules:[e=>e.length>0||"Please enter your password"],dark:""},null,8,["modelValue","rules"]),(0,a._)("div",null,[(0,a.Wm)(c,{label:"Submit",type:"submit",color:"white",class:"text-black"}),(0,a.Wm)(c,{label:"Reset",type:"reset",color:"white",outline:"",class:"q-ml-sm"})]),(0,a._)("div",r,[u,(0,a.Wm)(c,{size:"lg",color:"white",outline:"",class:"col-6",label:"Register","no-caps":"",onClick:t[2]||(t[2]=t=>e.$emit("show"))})])])),_:1},8,["onSubmit","onReset"])])}l(5363);var m=l(741),c=l(6940);const g={name:"login",emits:["show"],data(){return{email:"",password:""}},methods:{...(0,m.nv)("main",["toggleUserLogging","setCurrentUserAction"]),async onSubmit(){try{let e=await(0,c.XD)(this.email,this.password);this.$q.notify({color:"white",textColor:"black",message:"Logged in successfully",position:"bottom",timeout:1500});let t=await(0,c.fp)(e.uid);localStorage.setItem("auth",JSON.stringify({email:this.email,password:this.password})),this.$router.replace("/"),this.toggleUserLogging(!0),this.setCurrentUserAction(t),this.onReset()}catch(e){this.$q.notify({color:"negative",message:e.message})}},onReset(){this.email="",this.password=""},isEmailValid(e){const t=new RegExp(/^[a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1}([a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1})*[a-zA-Z0-9]@[a-zA-Z0-9][-\.]{0,1}([a-zA-Z][-\.]{0,1})*[a-zA-Z0-9]\.[a-zA-Z0-9]{1,}([\.\-]{0,1}[a-zA-Z]){0,}[a-zA-Z0-9]{0,}$/i);return t.test(e)}}};var p=l(4260),w=l(8689),h=l(4842),b=l(8240),V=l(7518),Z=l.n(V);const y=(0,p.Z)(g,[["render",d],["__scopeId","data-v-05df2058"]]),f=y;Z()(g,"components",{QForm:w.Z,QInput:h.Z,QBtn:b.Z});var k=l(8880);const v=e=>((0,a.dD)("data-v-8c075c94"),e=e(),(0,a.Cn)(),e),_={class:"absolute-center"},z=v((()=>(0,a._)("legend",{align:"right"},"Register",-1))),A={class:"q-gutter-sm"},R=v((()=>(0,a._)("label",{class:"text-white"},"Gender",-1))),S={class:"login-route row justify-around"},q=v((()=>(0,a._)("p",{class:"col-6"},"Old here?",-1)));function W(e,t,l,s,o,i){const n=(0,a.up)("q-input"),r=(0,a.up)("q-space"),u=(0,a.up)("q-radio"),d=(0,a.up)("q-btn"),m=(0,a.up)("q-form");return(0,a.wg)(),(0,a.iD)("fieldset",_,[z,(0,a.Wm)(m,{onSubmit:(0,k.iM)(i.onSubmit,["prevent"]),onReset:i.onReset,class:"q-gutter-md"},{default:(0,a.w5)((()=>[(0,a.Wm)(n,{modelValue:o.name,"onUpdate:modelValue":t[0]||(t[0]=e=>o.name=e),type:"text",label:"display name",rules:[e=>e.length>0||"Please enter your name"],dark:""},null,8,["modelValue","rules"]),(0,a._)("div",A,[R,(0,a.Wm)(r),(0,a.Wm)(u,{dark:"",class:"text-white",modelValue:o.gender,"onUpdate:modelValue":t[1]||(t[1]=e=>o.gender=e),val:"male",label:"Male"},null,8,["modelValue"]),(0,a.Wm)(u,{dark:"",class:"text-white",modelValue:o.gender,"onUpdate:modelValue":t[2]||(t[2]=e=>o.gender=e),val:"female",label:"Female"},null,8,["modelValue"])]),(0,a.Wm)(n,{modelValue:o.email,"onUpdate:modelValue":t[3]||(t[3]=e=>o.email=e),type:"text",label:"email",rules:[e=>i.isEmailValid(e)||"Please a valid email"],dark:""},null,8,["modelValue","rules"]),(0,a.Wm)(n,{modelValue:o.mobile,"onUpdate:modelValue":t[4]||(t[4]=e=>o.mobile=e),type:"number",label:"Mobile",rules:[e=>8===e.length||"Please a valid mobile number"],dark:""},null,8,["modelValue","rules"]),(0,a.Wm)(n,{modelValue:o.password,"onUpdate:modelValue":t[5]||(t[5]=e=>o.password=e),type:"password",label:"password",rules:[e=>e.length>0||"Please enter your password"],dark:""},null,8,["modelValue","rules"]),(0,a.Wm)(n,{modelValue:o.repeatPassword,"onUpdate:modelValue":t[6]||(t[6]=e=>o.repeatPassword=e),type:"password",label:"repeat password",rules:[e=>e===this.password||"Password does not match"],dark:""},null,8,["modelValue","rules"]),(0,a._)("div",null,[(0,a.Wm)(d,{label:"Submit",type:"submit",color:"white",class:"text-black"}),(0,a.Wm)(d,{label:"Reset",type:"reset",color:"white",outline:"",class:"q-ml-sm"})]),(0,a._)("div",S,[q,(0,a.Wm)(d,{size:"lg",color:"white",outline:"",class:"col-6",label:"Login","no-caps":"",onClick:t[7]||(t[7]=t=>e.$emit("show"))})])])),_:1},8,["onSubmit","onReset"])])}const U={name:"Register",async created(){let e=await(0,c.ts)();e?(this.$router.push("/"),this.toggleUserLogging(!0)):this.toggleUserLogging(!1)},emits:["show"],data(){return{name:"",email:"",password:"",repeatPassword:"",mobile:"",gender:null}},methods:{...(0,m.nv)("main",["toggleUserLogging"]),async onSubmit(){try{let e=await(0,c.y7)(this.email,this.password,this.name),t=await(await(0,c.Yu)("users")).length+1,l={name:this.name,email:this.email,mobile:this.mobile,gender:this.gender,membershipId:t,id:e.uid};await(0,c.Id)("users",l),localStorage.setItem("auth",JSON.stringify({email:this.email,password:this.password})),this.$router.replace("/"),this.toggleUserLogging(!0),this.onReset()}catch(e){console.log(e)}},onReset(){this.email="",this.password="",this.repeatPassword=""},isEmailValid(e){const t=new RegExp(/^[a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1}([a-zA-Z0-9][\-_\.\+\!\#\$\%\&\'\*\/\=\?\^\`\{\|]{0,1})*[a-zA-Z0-9]@[a-zA-Z0-9][-\.]{0,1}([a-zA-Z][-\.]{0,1})*[a-zA-Z0-9]\.[a-zA-Z0-9]{1,}([\.\-]{0,1}[a-zA-Z]){0,}[a-zA-Z0-9]{0,}$/i);return t.test(e)}}};var $=l(2025),P=l(9337);const x=(0,p.Z)(U,[["render",W],["__scopeId","data-v-8c075c94"]]),L=x;Z()(U,"components",{QForm:w.Z,QInput:h.Z,QSpace:$.Z,QRadio:P.Z,QBtn:b.Z});const Q={name:"auths",components:{Login:f,Register:L},data(){return{currentView:"login"}},methods:{switchView(){"login"===this.currentView?this.currentView="register":this.currentView="login"}}};var C=l(4379),I=l(4027);const E=(0,p.Z)(Q,[["render",s]]),j=E;Z()(Q,"components",{QPage:C.Z,QImg:I.Z})}}]);